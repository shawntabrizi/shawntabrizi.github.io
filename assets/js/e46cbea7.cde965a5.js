"use strict";(self.webpackChunkshawntabrizi=self.webpackChunkshawntabrizi||[]).push([[5258],{28238:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>o,metadata:()=>n,toc:()=>c});var n=a(20790),s=a(74848),i=a(28453);const o={title:"What is Substrate?",date:new Date("2019-09-29T00:00:00.000Z"),authors:"shawntabrizi",slug:"/substrate/what-is-substrate/",categories:["Substrate"],tags:["runtime","module","block","database","networking","transaction queue","consensus"]},r=void 0,l={authorsImageUrls:[void 0]},c=[{value:"In this post, I will try to explain the Substrate blockchain framework in a way that anyone with a bit of technical experience could understand.",id:"in-this-post-i-will-try-to-explain-the-substrate-blockchain-framework-in-a-way-that-anyone-with-a-bit-of-technical-experience-could-understand",level:5},{value:"What is a Blockchain?",id:"what-is-a-blockchain",level:2},{value:"Blocks",id:"blocks",level:3},{value:"Block Production",id:"block-production",level:3},{value:"Block Finalization",id:"block-finalization",level:3},{value:"Nodes",id:"nodes",level:3},{value:"Substrate Components",id:"substrate-components",level:2},{value:"Database",id:"database",level:3},{value:"Networking",id:"networking",level:3},{value:"Transaction Queue",id:"transaction-queue",level:3},{value:"Consensus",id:"consensus",level:3},{value:"Substrate Runtime",id:"substrate-runtime",level:2},{value:"Substrate Runtime Module Library (SRML)",id:"substrate-runtime-module-library-srml",level:3},{value:"Forkless Runtime Upgrades",id:"forkless-runtime-upgrades",level:3},{value:"Free, Open-Source, Production-Ready",id:"free-open-source-production-ready",level:2},{value:"Summary",id:"summary",level:2}];function h(e){const t={a:"a",blockquote:"blockquote",em:"em",h2:"h2",h3:"h3",h5:"h5",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h5,{id:"in-this-post-i-will-try-to-explain-the-substrate-blockchain-framework-in-a-way-that-anyone-with-a-bit-of-technical-experience-could-understand",children:"In this post, I will try to explain the Substrate blockchain framework in a way that anyone with a bit of technical experience could understand."}),"\n",(0,s.jsxs)(t.p,{children:["You may have heard before that Substrate is an ",(0,s.jsx)(t.strong,{children:"extensible"}),", ",(0,s.jsx)(t.strong,{children:"modular"}),", and ",(0,s.jsx)(t.strong,{children:"open-source"})," framework for building blockchains. But what does that mean?"]}),"\n",(0,s.jsx)(t.p,{children:"Substrate provides you with all the core components needed to build a distributed blockchain network:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"#database",children:"Database"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"#networking",children:"Networking"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"#transaction-queue",children:"Transaction Queue"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"#consensus",children:"Consensus"})}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["While these layers are extensible, Substrate mostly assumes the average blockchain developer should not care about the specific implementation details of these core components. Instead, Substrate's core philosophy is to make development of a blockchain's state transition function as flexible and easy as possible. This layer is called the ",(0,s.jsx)(t.a,{href:"#substrate-runtime",children:"Substrate runtime"}),"."]}),"\n",(0,s.jsx)(t.p,{children:"But before we dive into all these details, first we need to establish a common understanding of what a blockchain is..."}),"\n",(0,s.jsx)(t.h2,{id:"what-is-a-blockchain",children:"What is a Blockchain?"}),"\n",(0,s.jsxs)(t.p,{children:["In its most basic form, a blockchain is a simple data structure where ",(0,s.jsx)(t.em,{children:"blocks"})," of data are linked together forming an ordered ",(0,s.jsx)(t.em,{children:"chain"}),". The specific details of a blockchain can vary depending on the functionality of that chain. However, at a high level, all blockchains should share some common properties."]}),"\n",(0,s.jsx)(t.h3,{id:"blocks",children:"Blocks"}),"\n",(0,s.jsx)(t.p,{children:'Each block in a blockchain has some data that can be used to generate a unique identifier for that block. One part of this data is the unique identifier for the preceding block, known as the "parent block". Since each block has a pointer to its parent block, the blocks can be ordered in a deterministic way.'}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Blockchain Blocks",src:a(43886).A+"",width:"600",height:"220"})}),"\n",(0,s.jsx)(t.p,{children:'Any small changes to the data in a block will change its unique ID. Since this block\'s ID changed, the block that comes after it (the "child block") will also change. Same with the next child, and the next one, and the next... In fact, all the blocks that come after the originally modified block will have to change their unique ID in order to maintain the chain! This means that it is easy to verify that two blockchains have the exact same data by simply checking the unique identifier of the last block on the chain.'}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsxs)(t.p,{children:["To learn more about these basics of a blockchain, visit the demo/videos found here: ",(0,s.jsx)(t.a,{href:"https://anders.com/blockchain/",children:"https://anders.com/blockchain/"})]}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"block-production",children:"Block Production"}),"\n",(0,s.jsxs)(t.p,{children:["Due to these properties, blockchain systems are commonly used to keep track of a shared ",(0,s.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Ledger",children:"ledger"}),". The contents of the ledger are changed not by changing an existing block, but by adding new blocks to the blockchain with instructions about how the state of the ledger should change from block to block. These instructions are commonly referred to as ",(0,s.jsx)(t.em,{children:"transactions"}),"."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Block Production",src:a(50177).A+"",width:"600",height:"376"})}),"\n",(0,s.jsxs)(t.p,{children:["There are usually rules associated with how the ledger can change, which are defined by a ",(0,s.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Transition_system",children:"state transition function"}),". For cryptocurrency systems, these rules can be quite simple; for example:"]}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Rule:"})," Users can only spend funds that they own."]}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["These rules can also be more complex, even allowing for blockchain systems to act as a ",(0,s.jsx)(t.a,{href:"https://simple.wikipedia.org/wiki/Turing_complete",children:"Turing complete"})," computer, and the ledger acting as that computer's storage."]}),"\n",(0,s.jsx)(t.p,{children:"Once a valid set of transactions are collected, they are put into the content of a block, and then this block is placed at the end of the chain. This block production process allows the underlying state of the blockchain to change over time."}),"\n",(0,s.jsx)(t.h3,{id:"block-finalization",children:"Block Finalization"}),"\n",(0,s.jsxs)(t.p,{children:['Now that a new block has been produced, it can be shared with others who want to construct the same shared ledger. However, since blockchains are decentralized in nature, it could be that two different, yet still valid blocks compete for the same position at the end of a chain. Different block finalization mechanisms can be used to determine which "chain of blocks" is the ',(0,s.jsx)(t.em,{children:"canonical"}),' blockchain. For any given blockchain, there should only be one true final state of the shared ledger. Any alternative states of the blockchain are known as "forks".']}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Blockchain Fork",src:a(75930).A+"",width:"600",height:"236"})}),"\n",(0,s.jsx)(t.p,{children:"Forks are normal, expected, and generally not a problem. The block finalization process is in place to help non-canonical chains get back in sync. We will return to forking later in this post."}),"\n",(0,s.jsx)(t.h3,{id:"nodes",children:"Nodes"}),"\n",(0,s.jsxs)(t.p,{children:["At this point, you should be able to see that blockchains are designed to be distributed and decentralized. You want multiple users around the world to be able to keep track of this shared ledger without the need of intermediary third parties. By following the rules above, each participant of this shared ledger can run a ",(0,s.jsx)(t.em,{children:"node"}),', which is a computer program that follows the rules of the blockchain network and connects to other nodes that do the same, all without the need for a centralized service. Blockchain system are often "open" systems, which mean that anyone can participate. To prevent against malicious actors, mechanisms are put in place to incentivize good behavior while punishing bad behavior. With all of these mechanisms in place, a blockchain system can become an unstoppable machine.']}),"\n",(0,s.jsx)(t.h2,{id:"substrate-components",children:"Substrate Components"}),"\n",(0,s.jsxs)(t.p,{children:["Now that you have a high level understanding of what a blockchain is, we can now start to understand how Substrate is a framework for building them. The first claim about the Substrate framework is that it is ",(0,s.jsx)(t.strong,{children:"extensible"}),". This means that it makes as few assumptions about how you design your blockchain and attempts to be as ",(0,s.jsx)(t.em,{children:"generic"})," as possible."]}),"\n",(0,s.jsx)(t.h3,{id:"database",children:"Database"}),"\n",(0,s.jsxs)(t.p,{children:["As we illustrated, the heart of a blockchain is its shared ledger that must be maintained and stored. Substrate makes no assumptions about the content or structure of the data in your blockchain. The underlying database layer uses simple key-value storage, on top of which a modified Patricia Merkle tree (",(0,s.jsx)(t.a,{href:"https://github.com/paritytech/trie",children:"trie"}),") is implemented. This special storage structure allows us to easily verify if an item is or is not in that storage. This is particularly important to support light clients, who will depend on these storage proofs to provide light-weight, yet trustless interactions with the blockchain network."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Trie Structure",src:a(88516).A+"",width:"350",height:"219"})}),"\n",(0,s.jsx)(t.h3,{id:"networking",children:"Networking"}),"\n",(0,s.jsxs)(t.p,{children:["In order for a decentralized blockchain system to communicate, it needs to establish a peer-to-peer networking protocol. Substrate uses ",(0,s.jsx)(t.a,{href:"https://github.com/libp2p",children:"libp2p"})," as a modular peer-to-peer networking stack. Through this networking layer, Substrate-based blockchains are able to share transactions, blocks, peers, and other system critical details without the need for centralized servers. In line with Substrate's philosophy, libp2p is unique in the fact that it makes no assumptions about your specific networking protocol. As a result, you are able to implement and use different transports on top of a Substrate-based blockchain."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Peer-to-Peer Networking",src:a(95256).A+"",width:"600",height:"258"})}),"\n",(0,s.jsx)(t.h3,{id:"transaction-queue",children:"Transaction Queue"}),"\n",(0,s.jsxs)(t.p,{children:["As mentioned above, transactions are collected and formed into blocks that ultimately define how the state of the blockchain changes. However, the order of these transactions can impact the final state of the ledger. Substrate allows you full control over the dependency and queue management of transactions on your network. Substrate only assumes that a transaction has a ",(0,s.jsx)(t.em,{children:"weight"})," and a set of prerequisite ",(0,s.jsx)(t.em,{children:"tags"})," that are used to create dependency graphs. These dependency graphs are linear in the simplest case, but they can become more complex. Substrate handles those complexities for you automatically."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:a(94567).A+"",width:"226",height:"223"})}),"\n",(0,s.jsx)(t.h3,{id:"consensus",children:"Consensus"}),"\n",(0,s.jsxs)(t.p,{children:["Recall that there are different ways that a blockchain network can come to consensus about changes to the chain. Traditionally, these consensus engines are tightly coupled to the other blockchain components. However, Substrate has spent extra effort designing a consensus layer that can be easily changed during development. In fact, it was made such that consensus could even be hot-swapped after the chain goes live! Built into Substrate are multiple different consensus engines such as traditional ",(0,s.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Proof_of_work",children:"Proof of Work (PoW)"}),", ",(0,s.jsx)(t.a,{href:"https://github.com/poanetwork/wiki/wiki/Aura-Consensus-Protocol-Audit",children:"Aura (Authority Round)"}),", and Polkadot consensus, which is unique in the fact that it separates the block production process (",(0,s.jsx)(t.a,{href:"https://research.web3.foundation/en/latest/polkadot/BABE/Babe/",children:"BABE"}),") from the block finalization process (",(0,s.jsx)(t.a,{href:"https://research.web3.foundation/en/latest/polkadot/GRANDPA/",children:"GRANDPA"}),")."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"GRANDPA Consensus",src:a(49393).A+"",width:"600",height:"674"})}),"\n",(0,s.jsx)(t.h2,{id:"substrate-runtime",children:"Substrate Runtime"}),"\n",(0,s.jsxs)(t.p,{children:["So far, we have touched on all the core blockchain components that Substrate provides to you. As you have read, Substrate has made every effort to stay as generic and extensible as possible. However, arguably the most customizable part of Substrate is its ",(0,s.jsx)(t.strong,{children:"modular"})," runtime. The runtime is Substrate's ",(0,s.jsx)(t.em,{children:"state transition function"})," that we mentioned earlier."]}),"\n",(0,s.jsx)(t.p,{children:"Substrate believes that the average blockchain developer does not need to care so much about the blockchain components listed above. As long as the components are battle-tested and production-ready, the implementation details are often of little importance. However, the core blockchain logic that determines what is and is not valid for a network is often of critical importance for any chain."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Thus, Substrate's core philosophy is to make blockchain runtime development as flexible and easy as possible."})}),"\n",(0,s.jsx)(t.h3,{id:"substrate-runtime-module-library-srml",children:"Substrate Runtime Module Library (SRML)"}),"\n",(0,s.jsxs)(t.p,{children:["A Substrate runtime is divided into separate logical components that are known as ",(0,s.jsx)(t.em,{children:"runtime modules"}),'. These modules will control some aspect of the on-chain logic managed by that blockchain. You can think of these modules like "plug-ins" for your system. As a Substrate developer, you are able to pick and choose the modules and functionality that you want to include in your chain.']}),"\n",(0,s.jsxs)(t.p,{children:['For example, there is a module called "Balances" that manages the currency of the chain. There are also a set of modules like "Collective", "Democracy", and "Elections" that handle decision making and governance for the chain. There is even a module called "Contracts" that can turn any Substrate-based chain into a ',(0,s.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Smart_contract",children:"smart contract"})," platform. These kinds of modules are provided to you automatically when you build on Substrate."]}),"\n",(0,s.jsx)(t.p,{children:'However, you are not limited to only the modules provided by Substrate. In fact, developers can easily build their own runtime modules, either as independent logical components, or even directly interacting with other runtime modules to build more complicated logic. I believe that long term, the module system in Substrate will act much like an "app store", where users can simply pick and choose the functionality they want to include, and with minimal technical expertise, deploy a distributed blockchain network!'}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Modern App Store",src:a(29507).A+"",width:"600",height:"264"})}),"\n",(0,s.jsx)(t.h3,{id:"forkless-runtime-upgrades",children:"Forkless Runtime Upgrades"}),"\n",(0,s.jsx)(t.p,{children:"If we follow the analogy of the Substrate module ecosystem acting like an app store, then we must also address how we update our runtime. Whether it be bug fixes, general improvements to existing modules, or even new features that you want to add to your blockchain, the ability to change your runtime is something that Substrate has made a first class process."}),"\n",(0,s.jsx)(t.p,{children:"However, changes to the state transition function of your chain also impact consensus of the network. If one node running on your network has one version of your runtime logic, while another node has a different one, these two nodes will not be able to reach consensus with one another. They will fundamentally disagree on the true state of the ledger, resulting in what we defined earlier as a fork. These kinds of irreconcilable forks are bad because they reduce the security of your network, as only a subset of nodes will correctly create and verify new blocks."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Blockchain Hard Fork Upgrade",src:a(11586).A+"",width:"600",height:"236"})}),"\n",(0,s.jsxs)(t.p,{children:["Substrate has addressed this issue by having the network come to consensus about the runtime logic itself! Using the ",(0,s.jsx)(t.a,{href:"https://webassembly.org/",children:"Wasm"})," binary format, we are able to put the Substrate runtime code on the blockchain as part of the shared ledger. This means that anyone running a node is able to verify that their node has the latest logic. If it does not, then it will instead execute the on-chain Wasm directly! This means runtime upgrades to your blockchain can happen in real time, on a live network, without creating forks!"]}),"\n",(0,s.jsx)(t.p,{children:"In the spirit of Substrate's flexibility, you do not need to enable this feature at all. If you want to disable on-chain upgrades, you can. Truly, Substrate provides you with all the tools needed to create a living, breathing blockchain."}),"\n",(0,s.jsx)(t.h2,{id:"free-open-source-production-ready",children:"Free, Open-Source, Production-Ready"}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Note:"})," At the time of writing this post, Substrate is ",(0,s.jsx)(t.strong,{children:"not"})," production ready... but it almost is. Substrate is currently undergoing a security audit in preparation of a 2020 release of the Polkadot network."]}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["Substrate is a completely free and ",(0,s.jsx)(t.a,{href:"https://github.com/paritytech/substrate/blob/master/LICENSE",children:(0,s.jsx)(t.strong,{children:"open-source"})})," project. It is built using the ",(0,s.jsx)(t.a,{href:"https://www.rust-lang.org/",children:"Rust programming language"}),", which is designed for creating fast and inherently safe software. Coordination and development of Substrate happens through public communities like ",(0,s.jsx)(t.a,{href:"https://github.com/paritytech/substrate",children:"GitHub"})," and ",(0,s.jsx)(t.a,{href:"https://riot.im/app/#/room/!HzySYSaIhtyWrwiwEV:matrix.org",children:"Riot"}),", with over 100 individual contributors."]}),"\n",(0,s.jsxs)(t.p,{children:["Substrate is a project born from ",(0,s.jsx)(t.a,{href:"https://polkadot.network/",children:"Polkadot"}),", a larger vision of a world with many interoperable blockchains. Substrate powers the blockchain that connects this public network in addition to most of the chains that will be connected to it. You can feel secure that the technology that backs your blockchain is the same technology that powers multiple other production-level blockchains."]}),"\n",(0,s.jsx)(t.p,{children:"Substrate aims to be the absolute best platform for blockchain innovators, and the natural choice for anyone who is thinking about building a blockchain."}),"\n",(0,s.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsxs)(t.p,{children:["At this point, I hope that you can see why we say that Substrate an ",(0,s.jsx)(t.strong,{children:"extensible"}),", ",(0,s.jsx)(t.strong,{children:"modular"}),", and ",(0,s.jsx)(t.strong,{children:"open-source"})," platform for building blockchain systems. At every point in the Substrate development process, keeping things generic has remained a priority. As a result, Substrate can be used as a platform to build future technologies, even those that are not yet thought of."]}),"\n",(0,s.jsxs)(t.p,{children:["If you enjoy this content and want to see more, consider taking a look at my ",(0,s.jsx)(t.a,{href:"https://shawntabrizi.com/donate/",children:"donations page"})," to see how you can support me."]})]})}function d(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},29507:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/wis-app-store-4171b9a303df86ef4ec6b8da19e128f6.png"},50177:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/wis-block-production-68563f716e4ecd6d3efed4a6c7c369f2.png"},43886:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/wis-blocks-a004205229a523c5bf5da84a982c69a6.png"},75930:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/wis-forking-71df695650c428a073ff78c678c8fd3e.png"},49393:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/wis-grandpa-44847a526e8eb1f7ee66341e664dfcbf.png"},95256:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/wis-p2p-a499a0cce262ab950150f07b73efe654.png"},88516:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/wis-trie-5a8c290bd9aeeef1e5f55219243d9a9a.png"},94567:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/wis-txq-6ef60ead454175df78fec3d63d3397e1.png"},11586:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/wis-upgrade-d22af5621333c471cce07f164b00bde2.png"},28453:(e,t,a)=>{a.d(t,{R:()=>o,x:()=>r});var n=a(96540);const s={},i=n.createContext(s);function o(e){const t=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),n.createElement(i.Provider,{value:t},e.children)}},20790:e=>{e.exports=JSON.parse('{"permalink":"/blog/substrate/what-is-substrate/","source":"@site/blog/2019-09-29-what-is-substrate.md","title":"What is Substrate?","description":"In this post, I will try to explain the Substrate blockchain framework in a way that anyone with a bit of technical experience could understand.","date":"2019-09-29T00:00:00.000Z","tags":[{"inline":true,"label":"runtime","permalink":"/blog/tags/runtime"},{"inline":true,"label":"module","permalink":"/blog/tags/module"},{"inline":true,"label":"block","permalink":"/blog/tags/block"},{"inline":true,"label":"database","permalink":"/blog/tags/database"},{"inline":true,"label":"networking","permalink":"/blog/tags/networking"},{"inline":true,"label":"transaction queue","permalink":"/blog/tags/transaction-queue"},{"inline":true,"label":"consensus","permalink":"/blog/tags/consensus"}],"readingTime":10.95,"hasTruncateMarker":false,"authors":[{"name":"Shawn Tabrizi","title":"Software Engineer","url":"https://github.com/shawntabrizi","imageURL":"https://github.com/shawntabrizi.png","key":"shawntabrizi","page":null}],"frontMatter":{"title":"What is Substrate?","date":"2019-09-29T00:00:00.000Z","authors":"shawntabrizi","slug":"/substrate/what-is-substrate/","categories":["Substrate"],"tags":["runtime","module","block","database","networking","transaction queue","consensus"]},"unlisted":false,"prevItem":{"title":"Substrate Storage Deep Dive","permalink":"/blog/substrate/substrate-storage-deep-dive/"},"nextItem":{"title":"Substrate Feeless Token Factory","permalink":"/blog/substrate/substrate-feeless-token-factory/"}}')}}]);