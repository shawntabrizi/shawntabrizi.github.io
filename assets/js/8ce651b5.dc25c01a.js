"use strict";(self.webpackChunkshawntabrizi=self.webpackChunkshawntabrizi||[]).push([[1393],{40203:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>h,contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>r,toc:()=>l});var n=i(85893),a=i(11151);const o={title:"Microsoft Identities on the Ethereum Blockchain",date:new Date("2018-07-01T06:08:30.000Z"),authors:"shawntabrizi",slug:"/aad/microsoft-identities-on-the-ethereum-blockchain/",categories:["AAD","Ethereum"],tags:["azure active directory","blockchain","ethereum","identity","microsoft"],github:"Microsoft-Identities-on-the-Ethereum-Blockchain"},s=void 0,r={permalink:"/blog/aad/microsoft-identities-on-the-ethereum-blockchain/",source:"@site/blog/2018-06-30-microsoft-identities-on-the-ethereum-blockchain.md",title:"Microsoft Identities on the Ethereum Blockchain",description:'My favorite time of the year at Microsoft is the "OneWeek" Hackathon.',date:"2018-07-01T06:08:30.000Z",tags:[{inline:!0,label:"azure active directory",permalink:"/blog/tags/azure-active-directory"},{inline:!0,label:"blockchain",permalink:"/blog/tags/blockchain"},{inline:!0,label:"ethereum",permalink:"/blog/tags/ethereum"},{inline:!0,label:"identity",permalink:"/blog/tags/identity"},{inline:!0,label:"microsoft",permalink:"/blog/tags/microsoft"}],readingTime:6.545,hasTruncateMarker:!1,authors:[{name:"Shawn Tabrizi",title:"Software Engineer",url:"https://github.com/shawntabrizi",imageURL:"https://github.com/shawntabrizi.png",key:"shawntabrizi",page:null}],frontMatter:{title:"Microsoft Identities on the Ethereum Blockchain",date:"2018-07-01T06:08:30.000Z",authors:"shawntabrizi",slug:"/aad/microsoft-identities-on-the-ethereum-blockchain/",categories:["AAD","Ethereum"],tags:["azure active directory","blockchain","ethereum","identity","microsoft"],github:"Microsoft-Identities-on-the-Ethereum-Blockchain"},unlisted:!1,prevItem:{title:"Building a Simple Sign-In Page with MSAL.js for Microsoft Identities",permalink:"/blog/aad/building-a-simple-sign-in-page-with-msal-js-for-microsoft-identities/"},nextItem:{title:"Using Web3.js 1.0 Subscribe and Infura WebSockets to Visualize Ethereum Transactions",permalink:"/blog/ethereum/using-web3-js-1-0-subscribe-and-infura-websockets-to-visualize-ethereum-transactions/"}},h={authorsImageUrls:[void 0]},l=[{value:"Hypothesis: Microsoft&#39;s identity system has value which can be transferred to the Ethereum blockchain",id:"hypothesis-microsofts-identity-system-has-value-which-can-be-transferred-to-the-ethereum-blockchain",level:2},{value:"Building an attestation service",id:"building-an-attestation-service",level:2},{value:"The plan",id:"the-plan",level:2},{value:"Web Front End",id:"web-front-end",level:3},{value:"Middle Tier Service",id:"middle-tier-service",level:3},{value:"Back End Identity Contract",id:"back-end-identity-contract",level:3},{value:"CorpCoin Contract",id:"corpcoin-contract",level:3},{value:"More to come!",id:"more-to-come",level:2},{value:"Watch this video to learn more!",id:"watch-this-video-to-learn-more",level:2}];function c(e){const t={a:"a",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",ul:"ul",...(0,a.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.p,{children:'My favorite time of the year at Microsoft is the "OneWeek" Hackathon.'}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Hackathon Image",src:i(59818).Z+"",width:"842",height:"544"})}),"\n",(0,n.jsx)(t.p,{children:"It's a time of the year where you can work with some of the most talented engineers around to solve problems that you all agree are awesome."}),"\n",(0,n.jsxs)(t.p,{children:["I have lead a ",(0,n.jsx)(t.a,{href:"https://shawntabrizi.com/metime/",children:"different"})," ",(0,n.jsx)(t.a,{href:"https://shawntabrizi.com/Skill-Finder/",children:"project"})," every year, some of which have been hinted to in my ",(0,n.jsx)(t.a,{href:"https://shawntabrizi.com/code/scraping-linkedin-topics-skills-data/",children:"previous blog posts."})]}),"\n",(0,n.jsx)(t.p,{children:"This year will be no different."}),"\n",(0,n.jsx)(t.h2,{id:"hypothesis-microsofts-identity-system-has-value-which-can-be-transferred-to-the-ethereum-blockchain",children:"Hypothesis: Microsoft's identity system has value which can be transferred to the Ethereum blockchain"}),"\n",(0,n.jsx)(t.p,{children:"One of the amazing things about identities on Ethereum is that they are free, anonymous, and simple to create. However this also makes them pretty useless when trying to gate access to decentralized applications. There are solutions to combat this problem if you to build a reputation or token staking system around your application, but this usually involves a new identity to undergo significant onboarding before their identity becomes valuable. What if instead of completely recreating new identities, we could bootstrap them using our existing, modern identities?"}),"\n",(0,n.jsxs)(t.p,{children:['There is value in Microsoft Identities. I don\'t mean specifically "Microsoft.com accounts", I mean the identity system that is built by Microsoft, and is used by ',(0,n.jsx)(t.a,{href:"https://shawntabrizi.com/aad/does-company-x-have-an-azure-active-directory-tenant/",children:"85% of the Fortune 500"}),". If a user has an account in the Adobe company tenant, then we can pretty confidently say the following:"]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"That user is an employee of Adobe"}),"\n",(0,n.jsx)(t.li,{children:"That user's identity is managed by a Company Administrator at Adobe"}),"\n",(0,n.jsx)(t.li,{children:"That user's information first name, last name, phone number, etc. is relatively accurate"}),"\n",(0,n.jsx)(t.li,{children:"and more..."}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"This is actually the very information which powers Microsoft cloud services like Azure, Office 365, and the larger Microsoft Graph ecosystem. It is the same information that millions of apps use to build authentication and single-sign. There is trust because Microsoft has spent the time and energy to build a system with rigorous role based access control (RBAC), and companies have spent their time and energy populating these systems with data which powers their companies."}),"\n",(0,n.jsx)(t.p,{children:'My hypothesis is that there is value in these Microsoft identities, simply for existing. Not all of them are equally valuable, but for large companies who methodically manage and control that information, the value is actually quite high. The question is then: "How can we migrate this value onto Ethereum?"'}),"\n",(0,n.jsx)(t.h2,{id:"building-an-attestation-service",children:"Building an attestation service"}),"\n",(0,n.jsx)(t.p,{children:"Decentralized identity systems being developed on Ethereum are attempting to solve a number of critically important problems, however they are not attempting to replace all forms of centralization. There will always be some amount of centralization involved with adding claims or attestations to an identity. For example, if you want to prove that you are a US citizen, you will need to go to your state's DMV to get an ID card."}),"\n",(0,n.jsx)(t.p,{children:"In this case, we are interested in employment, and if you want to prove that your are an employee of a certain company, you will need to prove that you are registered within their internal systems. Imagine a middle tier service that accepts a valid authentication token, and associates that with an Ethereum address that the user provides. Then, if you can then make these proofs easily accessible, you then unlock a number of possibilities for dApps to take advantage of that information. Imagine the following user stories:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"An Ethereum address may want to prove who they are (Name, Company, Role, etc\u2026). They could do this by logging into their corporate Azure Active Directory, and store those claims on the blockchain tied to their account."}),"\n",(0,n.jsx)(t.li,{children:"Imagine Microsoft (or another company) wants to build a \u201cKudos\u201d currency which can be used to thank other Microsoft Employees when they do nice things for one another. However, it should only be used between Microsoft employees. Using this identity claim, a smart contract which runs this cryptocurrency could verify that only Microsoft employees are the senders and recipients of the currency."}),"\n",(0,n.jsx)(t.li,{children:"Imagine Microsoft (or another company) wants to build a decentralized market similar to SellBuy (a Microsoft internal alias for selling items) using the Ethereum blockchain. Similar to the other stories, this decentralized market should only allow people from Microsoft, or other trusted companies to join and list their products on the marketplace. So, the dApp uses these Microsoft Identity claims to gate access to the marketplace."}),"\n",(0,n.jsxs)(t.li,{children:["Imagine a decentralized application like ",(0,n.jsx)(t.a,{href:"https://www.teamblind.com/",children:"Blind"}),", where users from different companies can anonymously chat within their own personal and shared forums. On Ethereum, an app like this can be completely censorship free and immutable, a problem that is present with the current Blind app. To ensure that these anonymous users have the right company identifier, we would use the claims about their accounts stored on the blockchain."]}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"the-plan",children:"The plan"}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"High level architecture",src:i(54524).Z+"",width:"1385",height:"863"})}),"\n",(0,n.jsx)(t.p,{children:"The plan for the hackathon is actually relatively simple, mostly because we will be executing a proof of concept versus a battle tested, production ready design. Let's dive deeper into the pieces of the puzzle:"}),"\n",(0,n.jsx)(t.h3,{id:"web-front-end",children:"Web Front End"}),"\n",(0,n.jsx)(t.p,{children:"The sign up process:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"The user goes to our web front end, and iniates a Microsoft identity login flow"}),"\n",(0,n.jsx)(t.li,{children:"This results in an app + user access token for our middle tier resource, signed by Microsoft's identity provider"}),"\n",(0,n.jsx)(t.li,{children:"The user then signs this access token with their Ethereum private key"}),"\n",(0,n.jsx)(t.li,{children:"The web front end then sends a payload to the middle tier service with the access token and the signature for that payload"}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"middle-tier-service",children:"Middle Tier Service"}),"\n",(0,n.jsx)(t.p,{children:"Registering the user:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:'The middle tier service will recieve a "doubly signed" message, where the entire JWT is signed by the Ethereum address, and the contents of the JWT are signed by Microsoft'}),"\n",(0,n.jsx)(t.li,{children:"It will verify that the token's resource is for the middle tier"}),"\n",(0,n.jsx)(t.li,{children:"It will verify that the token was signed by Microsoft"}),"\n",(0,n.jsx)(t.li,{children:"It will verify that the payload has been signed by the Ethereum account"}),"\n",(0,n.jsx)(t.li,{children:"It will parse out specific claims about the user that it wants to store on the blockchain (MVP is Tenant ID)"}),"\n",(0,n.jsx)(t.li,{children:"It will generate a transaction to our back end smart contract to store this data on Ethereum"}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"back-end-identity-contract",children:"Back End Identity Contract"}),"\n",(0,n.jsx)(t.p,{children:"Storing the identity information:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"The back end identity contract will be owned by the middle tier service"}),"\n",(0,n.jsx)(t.li,{children:"It will define an extensible user object"}),"\n",(0,n.jsx)(t.li,{children:"It will have a mapping between Ethereum accounts and that user object"}),"\n",(0,n.jsx)(t.li,{children:"It will expose a getter function for other contracts to access that data"}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"corpcoin-contract",children:"CorpCoin Contract"}),"\n",(0,n.jsx)(t.p,{children:"Testing our identity system:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"The CorpCoin contract will be a basic ERC20 token"}),"\n",(0,n.jsx)(t.li,{children:"It will have a requirement that users have to be from a certain company/tenant to interact with the coin"}),"\n",(0,n.jsx)(t.li,{children:"It will interact with our back end identity contract to verify the user's company/tenant"}),"\n",(0,n.jsx)(t.li,{children:"It will issue coins to users who have not been issued coins in the past to bootstrap the 'economy'"}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"more-to-come",children:"More to come!"}),"\n",(0,n.jsx)(t.p,{children:"That is all I am ready to share for now, but note that this is just a very high level overview. There are so many intricacies and details to think about when solving this problem. Here are just a few:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"How can we automatically remove claims of a user once their off-chain identity has been deleted or removed from a particular group/claim?"}),"\n",(0,n.jsx)(t.li,{children:"How can we store identity claims on the blockchain such that it does not expose sensitive information about the user to people who they do not want to share it with?"}),"\n",(0,n.jsx)(t.li,{children:"What default claims should we be storing, and how can we allow users to extend those claims for their own needs?"}),"\n",(0,n.jsx)(t.li,{children:"How could we decentralize the middle tier service which verifies the user\u2019s Microsoft Identity, to increase trust that the claims stored on the blockchain are real?"}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"watch-this-video-to-learn-more",children:"Watch this video to learn more!"}),"\n",(0,n.jsx)("iframe",{src:"https://www.youtube.com/embed/Wg6kg2mLA3k",width:"720px",height:"480px"})]})}function d(e={}){const{wrapper:t}={...(0,a.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},59818:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/img_5b386bd8dab8a-3bc02633fda412eab69cff854f234b9d.png"},54524:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/img_5b527aea81ca1-bab6e05f6c37c5f5f33ac6734a63368d.png"},11151:(e,t,i)=>{i.d(t,{Z:()=>r,a:()=>s});var n=i(67294);const a={},o=n.createContext(a);function s(e){const t=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),n.createElement(o.Provider,{value:t},e.children)}}}]);